t||({u,p,w}=(()=>{const b=a=>pt*2**(a/12),e=(a,s,t)=>parseInt(a[(r>>t)%s],36),t=a=>255&-a,f=a=>256-abs(2*t(a)-256)-.5;return{u:{avg:a=>{let s=0;for(n of a)s+=n;return s/a.length},sq:e},p:{ph:b,sph:(a,s,t)=>b(e(a,s,t))},w:{sin:a=>128*(1-cos(a/128*PI))-.5,saw:t,tri:f,pws:(a,s=.5)=>255*(t(a)>255*s),pwt:(a,s=.5)=>255*(f(a)>255*s)}}})(),fx=[],lpf=lowPassFilter=(a,s)=>(lp_fxii=fxi++,fx[lp_fxii]??=0,fx[lp_fxii]+=(a-fx[lp_fxii])*s),hpf=highPassFilter=(a,s)=>a-lpf(a,s),bpf=bandPassFilter=(a,s,t)=>hpf(lpf(a,t),s),nf=notchFilter=(a,s,t)=>hpf(a,t)+lpf(a,s),lbf=lowBoostFilter=(a,s,t)=>a+lpf(a,s)*t,hbf=highBoostFilter=(a,s,t)=>a+hpf(a,s)*t,alpf=asyncLowPassFilter=(a,s,t)=>(alp_fxii=fxi++,fx[alp_fxii]??=0,alp_r=fx[alp_fxii],fx[alp_fxii]+=(a-alp_r)*(alp_r<a?s:t)),dMax=1e6,dly=multiTabDelay=(a,s,t,r=a=>a)=>{dly_fxii=fxi++,fx[dly_fxii]??=Array(dMax).fill(0),dly_wi=dt%dMax,dly_feed=a,dly_out=0;for(var b of s)dly_ri=(dMax+dt-round(b.t))%dMax,dly_feed+=fx[dly_fxii][dly_ri]*b.fb,dly_out+=fx[dly_fxii][dly_ri]*b.m;return fx[dly_fxii][dly_wi]=r(dly_feed),a*(1-t)+dly_out*t},cmp=compressor=(a,s,t,r,b,e=a)=>(cmp_fxii=fxi++,fx[cmp_fxii],a/(alpf(max(abs(e)-s,0),r,b)/s*t+1)),mn=(a,s=-127,t=127)=>min(max(a,s),t),bseqs=["aaaaaaaaaaaaaaa6666666666668888833333333555555556666666666688888","aaaaaaaaaaaaaaa8aaaaaaaaaaaaaaa8aaaaaaaaaaaaaaa86666666666688888","aaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaa"],lseqs=[0,lseq1="    haaff88dd665555 haaff88ddihaaaa haaff88dd665555 h88aaaa     ",lseq2="    haaaa   d8888   c5555  36aahhhh kcccc   haa556688aaddddccca5"],lofseqs=[0,lofseq1="3333011331133113333301133113312333330113311331133333011333333333",lofseq2="3333011111110111111101111113011333330111111101133113311333322212"],arpseq="afdfafdf6fdh6fdh3fdf5fdf68di6dfm",tofsts=a=>0===a?[.5,0][r>>13&1]:1===a?[.25,.75,.5,0,.25,.75,0,.25,.25,.75,.5,0,.25,.75,.5,.25][r>>12&15]:2===a?[.5,.5,0,0,.5,.5,0,0,.5,.5,0,0,.5,.75,.5,.25][r>>12&15]:0,tseqs=a=>1===a?[0,0,0,0,0,0,0,1][r>>16&7]:2===a?[2,0,0,0,0,0,0,0][r>>16&7]:0),fxi=0,dt=t,speed=.5,r=t*speed,pt=t,r32=r/4096%1,r16=r/8192%1,r8=r/16384%1,r4=r/32768%1,r2=r/65536%1,r2b=r/524288%1,rvrbHeads=[[{t:1e3+w.sin(t/210),m:.5,fb:.15},{t:1e4+w.sin(t/250),m:.5,fb:.35},{t:17e3+w.sin(t/300),m:.1,fb:.45},{t:37e3+w.sin(t/380),m:.1,fb:.65}],[{t:1100+w.sin(t/230),m:.5,fb:.15},{t:13e3+w.sin(t/270),m:.5,fb:.35},{t:14e3+w.sin(t/280),m:.1,fb:.45},{t:4e4+w.sin(t/400),m:.1,fb:.65}]],chrsHeads=[[{t:900+w.sin(t/300),m:1,fb:.2},{t:17e3+w.sin(t/310),m:.5,fb:.65}],[{t:900-w.sin(t/300),m:1,fb:.2},{t:16e3+w.sin(t/340),m:.5,fb:.65}]],dbheaders=[[{t:100+30*sin(r/8e3),fb:-.5,m:1}],[{t:100+30*cos(r/8e3),fb:-.5,m:1}]],lty=[1,1,2,2,0,1,1,1][sel=[0,1,1,2,3,4,r2b<.125?6:5,5,7][r>>19]],agt=[0,0,0,1,1,0,0,0][sel],bpg=[1,0,1,1,0,0,1,1][sel],kgt=[0,1,2,2,1,1,0,1][sel],ksq=[0,0,0,1,0,0,0,1][sel],bty=[0,1,0,4,3,3,0,0][sel],bsq=[0,0,0,1,1,0,0,2][sel],hty=[0,1,0,0,1,1,0,0][sel],tty=[1,0,0,0,0,0,2,0][sel],tfs=tofsts(tseqs(tty)),bgt=3===bty?mn(40*r8-10,0,1):mn(10*r8-2.5,0,1),kdmp=1<kgt,kon=!!kgt,kgt2=!ksq|r2b<.02,lseq=lseqs[lty],lofseq=lofseqs[lty],bseq=bseqs[bsq],biscon=kon&bty<3&kgt2,bph=p.sph(bseq,64,12),bsaw=w.saw(bph/8),bsub=.15*bsaw*(biscon?.6*bgt+.4:1)-.3*cos(bsaw/50)*255*(biscon?bgt**4:1),bsOct=4+4*(r8<.5),bside=a=>.18*w.pwt(bph/(bsOct+.03*(2*a-1)),.2*r16),bEnv=.005+(1-r32)*(1===bty?.5:0),2==bty&&(bEnv=.005+(1-.7*r32)**5*.2),bass=a=>mn(lpf(bsub+bside(a),bEnv),0,255)+30,lofs=u.sq(lofseq,64,13),lenv=1-(r/32768-lofs/4)%1,lph=p.sph(lseq,64,13),lead=.55*(lead=.4*(128&lph)*2*lenv**3+(96&lph)*lenv**1.2)*!!lty,7===sel&.3<r2b&&(lead=0),arp=(arp=w.tri((.5*p.sph(arpseq,32,13)&255)*(3-.1*r16)&210))*agt*.1,hh1env=1-.55*r16,hh2env=(1-.9*r32)**2.5,hihats=()=>hpf(14*random()*1*hh1env+24*random()*1*hh2env,.4),kick=93*sin(3e3*sqrt(r8)**.6/20)*(1-r8)**1.4*(1-bgt)*min(20*r8+.64,1),ksq&&(kick*=kgt2),kick=lpf(kick,kdmp?.05:1),clapenv=r4*(1-r8)*(.5<r4),clap=()=>180*bpf(random(),.2,.2)*clapenv,tomr=(r/16384+tfs)%1,tom=80*atan(10*sin(tomr*(1e3*(1-r2))+100*tomr**.02+150*tomr**.4)*(1-tomr)**15),tom=2*cmp(tom,20,.5,1,2e-4),6===sel&&(tom=70*tanh(tom/8*r8**2)),tom*=.4,sc=min(4*r8,1)**2*min(200*(1-r8),1),sc=kon?sc:1,kgt2||(sc=1),drumThrsh=kdmp?10+(1-r2b)**2*20:60,mixDiv=100-10*(3===bty),fwRev=kon&!ksq,rvHp=fwRev?.01:.1,rvMix=fwRev?.55:1,dbLp=4===bty?r2b**4*.1+.01:1,(song=a=>(__bass=.93*bass(a),_bass=__bass*(1-.1*r32),4===bty|6===sel&&(_bass=0),7===sel&&(_bass*=max(1-2*r2b,0)**2),_dbass=__bass,_dbass=((_dbass=200*atan(_dbass/100))>>1^_dbass)/5+(_dbass>>(4===bty?3:2)^_dbass)/2-128,_dbass=200*atan(_dbass/100),_dbass=dly(_dbass,dbheaders[a],4===bty?1:.5,a=>lpf(a,.5)),_dbass=hpf(_dbass,.04),_dbass=33*atan(_dbass/20),_dbass=lpf(_dbass,dbLp),_dbass=2<bty?_dbass*bgt:0,_lead=lead,_arp=arp,_chrs=_arp,_chrs=dly(_chrs,chrsHeads[a],.75,a=>200*tanh(a/200)),_reverb=_lead+.8*_chrs,_reverb=dly(_reverb,rvrbHeads[a],rvMix,a=>200*tanh(bpf(a,rvHp,.8)/200)),_reverb=1.2*cmp(_reverb,40,.6,.01,1e-5),_synths=_bass+_dbass+_reverb+_chrs,_synths=bpf(_synths,bpg?.01:.001,bpg?.2:1),_synths=nf(_synths,.02,.06),_synths=lbf(_synths,.0085,-.5),_synths=cmp(_synths,80,.7,.05,4e-4),_synths*=sc,_clap=clap(),_hihats=hihats(),_hihats=1.3*lpf(_hihats,.5),_drums=kon*kick+hty*(_clap+_hihats)+tom,_drums=nf(_drums,.01,.12),_drums=cmp(_drums,drumThrsh,1,1,2e-4),_mix=_synths+_drums,_mix=lbf(_mix,.0065,-1),_mix=1.6*cmp(_mix,50,.3,1,.001),_mix=200*tanh(_mix/mixDiv),(_mix=mn(_mix))/128))(0),[song(0),song(1)];